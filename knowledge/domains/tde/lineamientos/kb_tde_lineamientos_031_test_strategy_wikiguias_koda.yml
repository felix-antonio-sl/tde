# KODA TDE Test: Estrategia de Pruebas para la KB wikiguias como KB principal `tde`
---
_manifest:
  urn: "urn:knowledge:tde:lineamientos:test_strategy_wikiguias:1.0.0"
  federation: { visibility: public, license: "CC-BY-4.0" }
  domain: "tde_lineamientos"
  type: "KODA_Test_Strategy_Wikiguias"
  provenance:
    created_by: "Equipo KODA/TDE"
    created_at: "2025-12-11"
    source_corpus: "koda_internal"
    source_files: []
    source_urls: []
    source_updated_at: []
  status: draft

ID: "TDE-TEST-STRATEGY-WIKIGUIAS-031"
Version: 1.0.0
Status: Draft
Human-Creator: "Equipo KODA/TDE"
Human-Editor: "Equipo KODA/TDE"
Model-Collaborator: "IA-CASCADE"
Creation-Date: 2025-12-11
Modification-Date: 2025-12-11
Ctx: "Estrategia de pruebas (KODA/Test) para la KB construida desde el corpus wikiguias como KB principal `tde`, alineada con las métricas FS, TER y RD y con los workflows 029/030"

LLM_Parsing_Instructions:
  ID: KODA-LLM-PARSER-01
  Req: Mandatory block following Metadata.
  Prohib: Using for artifact creation or translation.
  Content: |
    BEGIN_LLM_INSTRUCTIONS
    You are an AI agent consuming a KODA artifact. Parse with absolute fidelity.

    FIDELITY: Este documento define suites de prueba. Trata sus casos, métricas y
    umbrales como condiciones formales para aceptar/rechazar artefactos KODA. No los
    reduzcas a simple texto informativo.

    LEXICON (expand before processing): Act->Action, Cond->Condition, Ctx->Context,
    Ctx_Required->Required External Reference, Ctx_Optional->Optional External
    Reference, Def->Definition, Ex->Example, Mssn->Mission, Obj->Objective,
    Proc->Process, Purp->Purpose, Ref->Reference, XRef->Cross-Artifact Reference,
    XRef_Required->Mandatory Cross-Artifact Reference, Req->Requirement,
    Res->Result, Src->Source, Prohib->Prohibition, Warn->Warning, Just->Justification,
    Rec->Recommendation, Metric->Metric, Step->Step, Test->Test.

    REFERENCE POLICY: Ref: interno; XRef: otros artefactos KODA (029/030, normas,
    plataformas), usados como contexto para pruebas específicas.

    LANGUAGE POLICY: Keywords en inglés, contenido en idioma original. Nunca
    traduzcas nombres de métricas ni URNs.
    END_LLM_INSTRUCTIONS

LLM_Instructions:
  role: "Estrategia de pruebas para la KB tde derivada de wikiguias"
  objective: >-
    Establecer una estrategia sistemática de pruebas (KODA/Test) para validar que la
    KB `tde` transformada desde wikiguias cumple con FS=100%, TER≥30% y RD≥2.0, y que
    mantiene coherencia sintáctica, estructural y de referencias.
  usage_guidance:
    - "Usar esta estrategia como contrato de pruebas para agentes auditores y
      pipelines de CI sobre la KB `tde`."
    - "Complementar con el workflow 029 (transformación) y la arquitectura 030
      (hub de agentes) para asignar responsabilidades."
  style:
    - "Tono técnico y orientado a casos de prueba; cada test debe ser implementable
      como verificación automática o check list humano."

Contexto_Testing_TDE:
  ID: "TDE_TEST_WIKIGUIAS_CTX_001"
  Ctx: >-
    La KB `tde` se construye desde el corpus wikiguias aplicando workflows
    estandarizados (029) y operada por un Hub de agentes (030). Para certificarla
    como KB principal, se requiere una estrategia de pruebas continua que verifique
    sintaxis, fidelidad MEAT, métricas FS/TER/RD, consistencia de referencias y
    coherencia entre artefactos.
  Obj:
    - "Definir suites de prueba por artefacto y a nivel global."
    - "Asignar cada tipo de prueba a agentes y/o revisores humanos."
    - "Establecer condiciones de aceptación para certificar la KB `tde`."

Metricas_Base:
  ID: "TDE_TEST_WIKIGUIAS_METRICAS_001"
  Metric:
    - Name: "FS"
      Def: "Fidelity Score. Porcentaje de MEAT de la fuente presente en el artefacto."
      Target: "FS=100% para todos los artefactos certificados."
    - Name: "TER"
      Def: "Token Efficiency Ratio. (tokens_KODA / tokens_fuente) * 100."
      Target: "TER≥30% en promedio por tipo de documento (norma, guía, plataforma)."
    - Name: "RD"
      Def: "Reference Density. Número promedio de referencias (Ref/XRef/Ctx) por
        bloque Tier1 significativo."
      Target: "RD≥2.0 en normas, estrategias y plataformas; RD≥1.0 en piezas breves."
  Rec:
    - "Registrar FS, TER y RD por artefacto y mantener un tablero agregado por
      categoría (normas, plataformas, estrategias, datos personales, etc.)."

Suite_Sintaxis_y_Estructura:
  ID: "TDE_TEST_WIKIGUIAS_SUITE_001"
  Purp: "Garantizar que todos los artefactos KODA/Spec sean válidos sintáctica y estructuralmente."
  Test:
    - Name: "YAML_Syntax_Valid"
      Req:
        - "Cada archivo YAML debe parsear sin errores (indentación, tipos, listas)."
        - "El bloque _manifest debe estar presente y bien formado (urn, domain, type,
          provenance)."
      Res:
        - "Lista de artefactos con errores de sintaxis y la línea/causa del error."
    - Name: "Core_Fields_Present"
      Req:
        - "Cada artefacto debe declarar ID, Version, Status, Human-Creator y
          Model-Collaborator."
        - "Status debe estar en {Draft, Published, Deprecated} (case-insensitive)."
      Res:
        - "Reporte de artefactos con campos core ausentes o inválidos."
    - Name: "Internal_Refs_Consistent"
      Req:
        - "Todos los campos Ref deben apuntar a IDs existentes dentro del mismo
          artefacto."
      Res:
        - "Lista de Ref rotas con archivo e ID inexistente."

Suite_Fidelidad_MEAT:
  ID: "TDE_TEST_WIKIGUIAS_SUITE_002"
  Purp: "Verificar que FS=100% para cada artefacto respecto a su(s) fuente(s)."
  Ctx_Required:
    - "urn:knowledge:tde:lineamientos:workflow_transformacion_wikiguias:1.0.0"
  Test:
    - Name: "Source_Declared"
      Req:
        - "Cada artefacto debe declarar al menos un archivo fuente en
          _manifest.provenance.source_file(s) y, cuando exista, source_url."
    - Name: "MEAT_Coverage_Audit"
      Req:
        - "Para cada artefacto, realizar una comparación sistemática de MEAT entre
          fuente y KODA (al menos mediante muestreo estratificado cuando la fuente
          es muy extensa)."
        - "No deben detectarse hechos, requisitos, definiciones o procesos
          relevantes presentes en la fuente que estén ausentes en el artefacto."
      Res:
        - "FS por artefacto (idealmente 100%); listado de hallazgos MEAT en caso de
          FS<100%, con propuesta de parche."
      Rec:
        - "Automatizar esta prueba parcialmente con TDE_AUDITOR_KB y revisar
          manualmente los artefactos más críticos (normas y plataformas)."

Suite_TER_y_RD:
  ID: "TDE_TEST_WIKIGUIAS_SUITE_003"
  Purp: "Monitorear eficiencia de tokens y densidad de referencias."
  Test:
    - Name: "TER_Calculation"
      Req:
        - "Calcular tokens_fuente y tokens_KODA con el mismo tokenizer para todos los
          artefactos que tienen fuente declarada."
        - "Generar TER por artefacto y por categoría (normas, guías, plataformas,
          estrategias)."
      Res:
        - "Tabla con TER por artefacto y TER promedio por categoría."
      Warn:
        - "Marcar artefactos con TER<25% como candidatos a revisión por posible
          pérdida de contexto."
    - Name: "RD_Calculation"
      Req:
        - "Para cada artefacto, calcular el número promedio de referencias
          (Ref/XRef/Ctx) por bloque Tier1 significativo."
      Res:
        - "Tabla con RD por artefacto y alerta cuando RD<umbral objetivo."
      Rec:
        - "Usar estos resultados para enriquecer XRef en futuras iteraciones de
          transformación."

Suite_Coherencia_Referencias_y_Dominios:
  ID: "TDE_TEST_WIKIGUIAS_SUITE_004"
  Purp: "Asegurar que las referencias cruzadas entre artefactos y dominios sean coherentes."
  Test:
    - Name: "XRef_Target_Exists"
      Req:
        - "Cada XRef/XRef_Required debe apuntar a una URN listada en el
          catalog_master_tde.yml o en otro catálogo relevante."
      Res:
        - "Listado de XRef rotas o huérfanas."
    - Name: "Domain_Consistency"
      Req:
        - 'Verificar que domain="tde_lineamientos" en todos los artefactos de
          lineamientos; reportar inconsistencias.'

Suite_Global_KB_Certificacion:
  ID: "TDE_TEST_WIKIGUIAS_SUITE_005"
  Purp: "Definir las condiciones para certificar la KB `tde` como lista para uso en producción."
  Cond:
    - "Cobertura mínima: 100% de las normas técnicas Ley 21.180, reglamento DS4,
      estrategias principales y plataformas compartidas clave deben estar presentes
      y en estado Draft o Published."
    - "FS>=100% para todos los artefactos incluidos en las categorías críticas
      (normas, reglamento, plataformas compartidas, estrategias base)."
    - "TER promedio por categoría ≥30%; ningún artefacto crítico con TER<25%."
    - "RD≥2.0 en normas, reglamento, estrategias y plataformas; RD≥1.0 en el resto."
    - "0 errores de sintaxis YAML y 0 Ref/XRef rotas."
  Res:
    - "Informe de certificación con estado global (Aprobado/Observado/Rechazado),
      métricas agregadas y lista de artefactos que impiden la certificación."

Integracion_con_Hub_Agentes:
  ID: "TDE_TEST_WIKIGUIAS_HUB_001"
  Ctx_Required:
    - "urn:knowledge:tde:lineamientos:arquitectura_hub_agentes_tde:1.0.0"
  Rec:
    - "Asignar Suite_002 y Suite_003 principalmente al agente TDE_AUDITOR_KB, con
      ejecución periódica (por ejemplo, semanal o tras lotes de cambios)."
    - "Integrar Suite_001 y Suite_004 en pipelines de CI/CD que validen cambios
      antes de fusionarlos en la rama principal."
    - "Ejecutar Suite_005 como hito de certificación antes de declarar la KB `tde`
      como lista para uso en producción por agentes como DIGITRANS."

Glosario_Ref_Lexicon:
  Description: "Términos de testing apoyados en el Lexicon TDE."
  Terms:
    - Term: "Servicios digitales"
      Ref_ID: "TDE_DEF_SERVICIOS_DIGITALES"
      XRef: "urn:knowledge:tde:core:lexicon_wikiguias:1.0.0#TDE_DEF_SERVICIOS_DIGITALES"

XRef_Lineamientos_Relacionados:
  Description: "Workflows y lineamientos que se relacionan con la estrategia de pruebas."
  XRef:
    - "urn:knowledge:tde:lineamientos:workflow_transformacion_wikiguias:1.0.0"
    - "urn:knowledge:tde:lineamientos:arquitectura_hub_agentes_tde:1.0.0"
    - "urn:knowledge:tde:lineamientos:marco_gestion_datos_mgde:1.0.0"
    - "urn:knowledge:tde:lineamientos:estrategia_datos_administracion_estado:1.0.0"
