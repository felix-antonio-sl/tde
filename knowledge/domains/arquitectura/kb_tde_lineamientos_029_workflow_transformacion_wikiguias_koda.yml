# KODA TDE Workflow: Transformación del corpus wikiguias a KODA/Spec
---
_manifest:
  urn: "urn:knowledge:tde:lineamientos:workflow_transformacion_wikiguias:1.0.0"
  federation: { visibility: public, license: "CC-BY-4.0" }
  domain: "tde_lineamientos"
  type: "Workflow_Transformacion_KODA_Wikiguias"
  provenance:
    created_by: "Equipo KODA/TDE"
    created_at: "2025-12-11"
    source_corpus: "koda_internal"
    source_files:
      - "tde/knowledge/domains/tde/lineamientos/kb_tde_lineamientos_029_workflow_transformacion_wikiguias_koda.yml"
    source_urls: []
    source_updated_at: []
  status: draft

ID: "TDE-WORKFLOW-WIKIGUIAS-029"
Version: 1.0.0
Status: Draft
Human-Creator: "Equipo KODA/TDE"
Human-Editor: "Equipo KODA/TDE"
Model-Collaborator: "IA-CASCADE"
Creation-Date: 2025-12-11
Modification-Date: 2025-12-14
Ctx: "Workflow de 4 fases (Análisis, Telegrafización, Deduplicación, Validación) para transformar el corpus wikiguias en artefactos KODA/Spec con FS=100%, TER≥30% y RD≥2.0"

LLM_Parsing_Instructions:
  ID: KODA-LLM-PARSER-01
  Req: Mandatory block following Metadata.
  Prohib: Using for artifact creation or translation.
  Content: |
    BEGIN_LLM_INSTRUCTIONS
    You are an AI agent consuming a KODA artifact. Parse with absolute fidelity.

    FIDELITY: Este workflow describe un proceso interno. Debes respetar los pasos,
    condiciones y métricas (FS, TER, RD) como reglas operativas, no como texto
    decorativo.

    LEXICON (expand before processing): Act->Action, Cond->Condition, Ctx->Context,
    Ctx_Required->Required External Reference, Ctx_Optional->Optional External
    Reference, Def->Definition, Ex->Example, Mssn->Mission, Obj->Objective,
    Proc->Process, Purp->Purpose, Ref->Reference, XRef->Cross-Artifact Reference,
    XRef_Required->Mandatory Cross-Artifact Reference, Req->Requirement,
    Res->Result, Src->Source, Prohib->Prohibition, Warn->Warning, Just->Justification,
    Rec->Recommendation, Metric->Metric, Step->Step.

    REFERENCE POLICY: Ref: es interno al documento—debe apuntar a un ID existente en
    ESTE artefacto. XRef/XRef_Required: son externos—deben apuntar a un URN (opcional
    con fragmento #ID) en otro artefacto del dominio TDE.

    LANGUAGE POLICY: Keywords en inglés, contenido en idioma original. Nunca traduzcas
    las descripciones de los pasos ni las métricas.
    END_LLM_INSTRUCTIONS

LLM_Instructions:
  role: "Workflow interno de transformación KODA para el corpus wikiguias"
  objective: >-
    Estandarizar cómo agentes humanos y de IA analizan, telegrafían, deduplican y
    validan documentos del corpus wikiguias para producir artefactos KODA/Spec con
    FS=100%, TER≥30% y RD≥2.0.
  usage_guidance:
    - "Aplicar este workflow antes de crear o modificar artefactos KODA a partir de
      fuentes wikiguias."
    - "Usar las fases y pasos como checklist operativo para agentes KODA-TRANSFORMER."
  style:
    - "Tono técnico y procedimental; cada paso debe ser interpretable como instrucción
      ejecutable." 

Workflow_Global:
  ID: "TDE_WORKFLOW_WIKIGUIAS_GLOBAL_001"
  Mssn: >-
    Transformar progresivamente el corpus wikiguias en una base de conocimiento KODA
    para el dominio TDE, con alta fidelidad semántica, eficiencia de tokens y densa
    red de referencias cruzadas.
  Obj:
    - "Asegurar FS=100% (fidelidad del MEAT) entre fuente y artefactos KODA."
    - "Mantener TER≥30% (tokens de KODA respecto a tokens de fuente) a nivel de
      documento y lote."
    - "Mantener RD≥2.0 (referencias por bloque semántico) en artefactos complejos."
  Fases:
    - "Fase 1: Analisis"
    - "Fase 2: Telegrafizacion"
    - "Fase 3: Deduplicacion"
    - "Fase 4: Validacion"

Metricas_FS_TER_RD:
  ID: "TDE_WORKFLOW_WIKIGUIAS_METRICAS_001"
  Metric:
    - Name: "FS"
      Def: "Fidelity Score. Porcentaje de MEAT (hechos, requisitos, definiciones,
        estructuras normativas) de la fuente que está presente en el artefacto KODA."
      Target: "FS=100% (ningún MEAT relevante puede perderse)."
    - Name: "TER"
      Def: "Token Efficiency Ratio. (tokens_KODA / tokens_fuente) * 100."
      Target: "TER≥30% (idealmente entre 30% y 60% según tipo de documento)."
    - Name: "RD"
      Def: "Reference Density. Número promedio de referencias (Ref/XRef/Ctx) por
        bloque semántico significativo (Tier1)."
      Target: "RD≥2.0 en artefactos estratégicos, normativos y de plataformas
        compartidas; RD≥1.0 en piezas muy breves."
  Rec:
    - "Calcular FS y TER a nivel de documento; monitorear RD por bloque para detectar
      zonas pobres en referencias."

Fase_1_Analisis:
  ID: "TDE_WORKFLOW_WIKIGUIAS_F1_001"
  Purp: >-
    Entender a fondo la pieza fuente, clasificar su tipo y decidir el mapeo más
    adecuado (1:1, 1:n, n:1) hacia artefactos KODA, identificando todo el MEAT.
  Paso_1_Tipificacion:
    Step:
      - "Identificar tipo de fuente: Norma técnica, Reglamento, Guía técnica,
        Estrategia, Estándar, Manual de plataforma, Política, etc."
      - "Identificar dominio TDE afectado: seguridad/ciberseguridad, protección de
        datos, plataformas compartidas, TD/STD, datos abiertos, etc."
  Paso_2_Estructura_y_MEAT:
    Step:
      - "Leer la fuente completa (secciones, artículos, capítulos, anexos) y
        construir un esquema jerárquico (índice mental) con sus partes."
      - "Marcar explícitamente: definiciones, objetos, propósitos, requisitos,
        procedimientos, métricas, anexos normativos, tablas de parámetros."
      - "Separar en el análisis MEAT vs FAT (retórica, portada, lenguaje motivacional,
        repeticiones, ejemplos puramente ilustrativos)."
  Paso_3_Decision_Mapping:
    Def: "Decisión de mapeo entre fuentes y artefactos."
    Cond:
      - "1:1: la pieza fuente tiene alcance acotado y cohesivo (ej. una norma
        técnica individual, una guía acotada)."
      - "1:n: la pieza fuente es paraguas y conviene descomponer en lineamientos
        específicos (ej. una estrategia amplia que alimenta varios artefactos)."
      - "n:1: varias fuentes pequeñas o complementarias describen un mismo objeto
        (ej. manual de integración + manual de inicio + extractos STD), que deben
        confluir en un solo lineamiento KODA."
    Rec:
      - "Documentar explícitamente en Metadata_Original de cada artefacto el conjunto
        real de archivos fuente usados, aunque la relación no sea 1:1."

Fase_2_Telegrafizacion:
  ID: "TDE_WORKFLOW_WIKIGUIAS_F2_001"
  Purp: >-
    Convertir el MEAT identificado en estructuras KODA Tier1 compactas, coherentes y
    reutilizables, eliminando FAT y redundancias textuales sin perder contenido.
  Paso_1_Mapping_Tier1:
    Step:
      - "Mapear secciones de la fuente a bloques Tier1 estándar: Ctx, Def, Obj,
        Purp, Req, Rec, Act, Res, Warn, etc."
      - "Para normas/guías, privilegiar bloques por función: contexto, objeto,
        definiciones, requisitos mínimos, procesos, métricas, disposiciones finales."
      - "Para plataformas, privilegiar: contexto/rol, definiciones, requisitos de
        uso, flujos de integración, operación, gobernanza y articulación normativa."
  Paso_2_Telegrafia_Semantica:
    Step:
      - "Redactar el contenido en estilo telegráfico pero completo: frases cortas,
        sin perder condiciones, excepciones ni umbrales."
      - "Eliminar redundancias retóricas (introducciones repetidas, justificaciones
        extensas) manteniendo solo justificaciones claves cuando aportan criterio."
      - "En tablas, convertir únicamente las celdas que contengan MEAT
        (parámetros, umbrales, condiciones) en listas o estructuras más simples."
  Paso_3_Inyeccion_XRef_y_Lexicon:
    Step:
      - "Detectar conceptos que ya existen en el Lexicon TDE y referenciarlos con
        XRef al lexicon en lugar de redefinirlos."
      - "Agregar Ctx_Required/XRef_Required hacia normas técnicas, reglamentos y
        estrategias cuando la fuente los cita como base."
      - "Asegurar RD≥2.0 en artefactos complejos, añadiendo referencias cruzadas
        relevantes pero no decorativas."

Fase_3_Deduplicacion:
  ID: "TDE_WORKFLOW_WIKIGUIAS_F3_001"
  Purp: >-
    Evitar que distintas fuentes generen bloques KODA redundantes o inconsistentes,
    consolidando conceptos y requisitos compartidos.
  Paso_1_Chequeo_Contra_KB:
    Step:
      - "Antes de crear un nuevo bloque Def/Req/Proc, buscar en la KB TDE si ya
        existe un bloque equivalente en otra pieza."
      - "Si existe, referenciarlo (Ref/XRef) y solo especializar cuando la nueva
        fuente agrega detalles objetivos."
  Paso_2_Consolidacion:
    Step:
      - "Cuando varias fuentes describen el mismo concepto (ej. DDU, PISEE,
        CasillaÚnica), consolidar la definición en el Lexicon o en un lineamiento
        central y usar referencias desde el resto."
      - "Evitar copiar tablas extensas idénticas; representar una sola vez el
        parámetro y usar referencias."
  Paso_3_Mapping_n1:
    Cond:
      - "Si varias fuentes pequeñas describen diferentes aspectos de la misma
        plataforma/proceso, optar por un artefacto único (n:1) con Metadata que
        liste todas las fuentes."
    Rec:
      - "Documentar en comentarios internos o en documentación externa (no KODA) las
        decisiones de consolidación, para futuras auditorías."

Fase_4_Validacion:
  ID: "TDE_WORKFLOW_WIKIGUIAS_F4_001"
  Purp: >-
    Verificar que el artefacto KODA resultante sea sintácticamente válido, cubra
    100% del MEAT, cumpla con TER y RD objetivo y esté correctamente enlazado.
  Paso_1_Validacion_Sintaxis:
    Step:
      - "Validar que el YAML sea sintácticamente correcto (indentación, tipos,
        listas)."
      - "Verificar que IDs internos sean únicos y que Ref apunten a IDs existentes."
  Paso_2_Validacion_MEAT:
    Step:
      - "Recorrer la fuente y el artefacto bloqueo a bloqueo, comprobando que todo
        hecho, requisito, definición y proceso relevante esté presente (FS=100%)."
      - "Si se detecta MEAT perdido, regresar a Fase 2 para telegrafiarlo e
        incorporarlo."
  Paso_3_Validacion_Metricas:
    Step:
      - "Estimar TER comparando tokens de la fuente vs tokens del artefacto
        (aproximación es suficiente si se respeta el umbral)."
      - "Calcular RD por bloque semántico y asegurar que se cumplen los mínimos."
      - "Si TER<30% o RD<objetivo, revisar si se ha telegrafiado en exceso o si
        faltan referencias clave."
  Paso_4_Validacion_Cruzada:
    Step:
      - "Verificar coherencia con artefactos relacionados (ej. Norma + Guía +
        Plataforma) y ajustar XRef para representar dependencias reales."
      - "Registrar (fuera de KODA) el resultado de la validación (aprobado,
        observado, rechazado) y las acciones pendientes."

Patrones_Mapping_Fuentes_Artefactos:
  ID: "TDE_WORKFLOW_WIKIGUIAS_PATTERNS_001"
  Def: >-
    Patrones recomendados de mapeo entre fuentes wikiguias y artefactos KODA,
    aplicables al dominio TDE.
  Patrones:
    - Name: "Norma_Tecnica_Individual"
      Cond: "Una norma técnica completa y autocontenida (ej. Decreto 7, 8, 9, 10,
        12)."
      Rec:
        - "Mapear 1:1 a un lineamiento KODA que conserve artículos, objeto,
          definiciones, funciones/categorías y disposiciones finales."
        - "Complementar con guías técnicas específicas por separado (1:n)."
    - Name: "Guia_Operativa_de_Norma"
      Cond: "Guías que desarrollan en detalle funciones o controles de una norma
        técnica (ej. GU-CIBER-001)."
      Rec:
        - "Mapear 1:1 a un lineamiento que operacionalice la norma base con
          procesos, pasos y requisitos."
        - "Mantener XRef_Required hacia la norma técnica base."
    - Name: "Plataforma_Compartida"
      Cond: "Manuales de uso e integración de plataformas compartidas (ClaveÚnica,
        Notificador, SIMPLE, DocDigital, PISEE, Datos.gob)."
      Rec:
        - "Usar n:1 cuando existan varios manuales (inicio + integración + otros)."
        - "Enfocarse en: contexto/rol, requisitos de habilitación, flujos de
          integración, operación y gobernanza."
    - Name: "Estrategias_y_Marcos"
      Cond: "Estrategias y guías paraguas (Estrategia de Datos, Estrategia de
        Gobierno Digital, STD, EVALTIC, Orientaciones TIC)."
      Rec:
        - "Mapear 1:n generando varios lineamientos temáticos si es necesario
          (gobernanza de datos, inversión TIC, arquitectura de servicios, etc.)."
        - "Usar estos lineamientos como Ctx_Required/XRef en piezas operativas."

Articulacion_Con_Agentes:
  ID: "TDE_WORKFLOW_WIKIGUIAS_AGENTES_001"
  Ctx: >-
    Este workflow está pensado para ser ejecutado tanto por personas editoras como
    por agentes KODA-TRANSFORMER y otros agentes especializados sobre la KB TDE.
  Rec:
    - "Implementar la Fase 1 (Análisis) con mayor participación humana cuando la
      fuente sea muy ambigua o políticamente sensible."
    - "Automatizar parcialmente Fase 2 (Telegrafización) y Fase 3 (Deduplicación)
      con agentes que conozcan la estructura KODA y el inventario de la KB."
    - "Mantener Fase 4 (Validación) como paso mixto: validación automática básica
      (sintaxis, referencias, métricas) + revisión humana muestral para asegurar
      calidad."
